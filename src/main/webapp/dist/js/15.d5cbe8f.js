(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{510:function(t,e,o){var r=o(544);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,o(63).default)("60530e90",r,!1,{})},543:function(t,e,o){"use strict";var r=o(510);o.n(r).a},544:function(t,e,o){},563:function(t,e,o){"use strict";o.r(e);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"box"},[o("h5",{staticClass:"box__title"},[e._m(0),e._v(" "),o("el-button-group",{staticClass:"box__buttons",attrs:{size:"small"}},[o("el-button",{attrs:{type:"info",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:e.add}},[e._v("新建")]),e._v(" "),o("el-button",{attrs:{type:"info",icon:"el-icon-edit",size:"small"},on:{click:e.edit}},[e._v("更新")]),e._v(" "),o("el-button",{attrs:{type:"info",icon:"el-icon-delete",size:"small"},on:{click:e.deleteItem}},[e._v("删除")]),e._v(" "),o("el-button",{attrs:{type:"info",icon:"el-icon-view",size:"small"},on:{click:e.preview}},[e._v("查看")])],1)],1),e._v(" "),o("div",{staticClass:"box__querys"},[o("div",{staticClass:"query__item"},[o("label",[e._v("学校/科目/课程：")]),e._v(" "),o("el-cascader",{staticStyle:{width:"400px"},attrs:{options:e.vo.schools,size:"small",props:e.vo.props},on:{"active-item-change":e.handleItemChange},model:{value:e.po.school,callback:function(t){e.$set(e.po,"school",t)},expression:"po.school"}})],1),e._v(" "),o("div",{staticClass:"query__item"},[o("el-button",{attrs:{plain:"",size:"small"},on:{click:e.search}},[e._v("查询")])],1)]),e._v(" "),o("DataGrid",{ref:"dg",attrs:{url:"/Coursewares",params:e.po.params,radio:!0}},[o("el-table-column",{attrs:{type:"expand",fixed:"left",label:"展开详情",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form",{attrs:{"label-position":"left"}},[o("el-form-item",{attrs:{label:"背景图片"}},[o("perview",{staticStyle:{"max-width":"200px"},attrs:{src:t.row.photo_url}})],1),e._v(" "),o("el-form-item",{attrs:{label:"音频地址"}},[o("audio",{attrs:{src:t.row.audio_url,controls:""}})]),e._v(" "),o("el-form-item",{attrs:{label:"视频地址"}},[o("video",{staticStyle:{"max-width":"300px"},attrs:{src:t.row.video_url,controls:""}})])],1)]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"id",label:"ID",width:"100",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"course_name",label:"课程名称",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{prop:"name",label:"课件名称",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{prop:"description",label:"课件简介"}}),e._v(" "),o("el-table-column",{attrs:{prop:"school_name",label:"是否在推广位展示",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(1==t.row.is_displayed_on_subject_page?"是":"否")+"\n            ")]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"school_name",label:"是否在主页展示",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(1==t.row.is_displayed_on_main_page?"是":"否")+"\n            ")]}}])})],1)],1)};r._withStripped=!0;var a={data:function(){return{po:{school:[],params:{courseId:""}},vo:{schools:[],props:{value:"id",label:"name",children:"children"}}}},methods:{handleItemChange:function(t){1==t.length?this.getSubject(t[0]):2==t.length&&this.getCourses(t[0],t[1])},getSchools:function(){var e=this;this.$get("/Schools").then(function(t){e.vo.schools=t.map(function(t){return t.children=[],t})}).catch(function(t){t&&e.$alert(t.message,"错误","error")})},getSubject:function(n){var l=this;this.$get("/Subjects",{schoolId:n,limit:9999999,offset:0,paginationData:{query_type:1,query_id:0,page_mode:1},_:{query_type:1,query_id:0,page_mode:1}}).then(function(t){var e=!0,o=!1,r=void 0;try{for(var a,i=l.vo.schools[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var s=a.value;if(s.id==n){s.children=(t.dataset||[]).map(function(t){return t.children=[],t});break}}}catch(t){o=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(o)throw r}}}).catch(function(t){t&&l.$alert(t.message,"错误","error")})},getCourses:function(p,f){var _=this;this.$get("/Courses",{subjectId:f,limit:9999999,offset:0,paginationData:{query_type:1,query_id:0,page_mode:1},_:{query_type:1,query_id:0,page_mode:1}}).then(function(t){var e=!0,o=!1,r=void 0;try{for(var a,i=_.vo.schools[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var s=a.value;if(s.id==p){var n=!0,l=!1,c=void 0;try{for(var u,d=s.children[Symbol.iterator]();!(n=(u=d.next()).done);n=!0){var h=u.value;if(h.id==f){h.children=t.dataset||[];break}}}catch(t){l=!0,c=t}finally{try{n||null==d.return||d.return()}finally{if(l)throw c}}break}}}catch(t){o=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(o)throw r}}}).catch(function(t){t&&_.$alert(t.message,"错误","error")})},search:function(){this.po.school&&3==this.po.school.length&&(this.po.params.courseId=this.po.school[2]),this.$refs.dg.reload()},getChecked:function(){var t=this.$refs.dg.getChecked();return t||(this.$message({message:"请先选择一行",type:"warning",duration:2e3}),null)},add:function(){this.$router.push("/courseware/add")},edit:function(){var t=this.getChecked();t&&this.$router.push("/courseware/edit/".concat(t.id))},deleteItem:function(){var e=this,t=this.getChecked();t&&this.$confirm("确定删除？","提示").then(function(){e.$delelte("/Courseware/".concat(t.id),{id:t.id}).then(function(t){e.search()}).catch(function(t){t&&e.$alert(t.message,"错误","error")})}).catch(function(){})},preview:function(){var t=this.getChecked();t&&this.$router.push("/courseware/view/".concat(t.id))}},created:function(){this.getSchools()}},i=(o(543),o(23)),s=Object(i.a)(a,r,[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",[o("i",{staticClass:"el-icon-tickets"}),t._v("课件管理")])}],!1,null,"bbdcccb8",null);s.options.__file="src/pages/courseware/list/index.vue";e.default=s.exports}}]);