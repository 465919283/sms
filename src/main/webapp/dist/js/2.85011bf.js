(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{508:function(e,t,o){var s=o(540);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,o(63).default)("e51ba5a2",s,!1,{})},539:function(e,t,o){"use strict";var s=o(508);o.n(s).a},540:function(e,t,o){},560:function(e,t,o){"use strict";o.r(t);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"box"},[o("h5",{staticClass:"box__title"},[o("span",[o("i",{staticClass:"el-icon-tickets"}),t._v(t._s("view"==t.vo.mode?"查看详情":"编辑页面"))]),t._v(" "),o("el-button-group",{staticClass:"box__buttons",attrs:{size:"small"}},["view"!=t.vo.mode?o("el-button",{attrs:{type:"info",icon:"el-icon-edit",size:"small"},on:{click:t.edit}},[t._v("保存")]):t._e(),t._v(" "),o("el-button",{attrs:{type:"info",icon:"el-icon-d-arrow-left",size:"small"},on:{click:t.back}},[t._v("返回")])],1)],1),t._v(" "),o("el-form",{ref:"baseForm",staticClass:"box__form",attrs:{disabled:"view"==t.vo.mode,model:t.po.base,"label-width":"120px",rules:t.vo.baseRiles}},[o("el-form-item",{attrs:{label:"名称",prop:"name"}},[o("el-input",{model:{value:t.po.base.name,callback:function(e){t.$set(t.po.base,"name",e)},expression:"po.base.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"学校名称",prop:"school_id"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.po.base.school_id,callback:function(e){t.$set(t.po.base,"school_id",e)},expression:"po.base.school_id"}},t._l(t.vo.schools,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)],1)};s._withStripped=!0;var a={data:function(){return{po:{id:"",base:{school_id:null,manegement_status_id:null,name:""}},vo:{mode:"add",schools:[],managementStatusList:[{id:0,name:"Created"},{id:1,name:"Vaildated"},{id:2,name:"Published"},{id:3,name:"Reviked"}],baseRiles:{school_id:[{required:!0,message:"请选择学校",trigger:"change"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}}},computed:{},methods:{handleItemChange:function(e){1==e.length&&this.getBranchSchools(e[0])},getSchools:function(){var t=this;this.$get("/Schools").then(function(e){t.vo.schools=e}).catch(function(e){e&&t.$alert(e.message,"错误","error")})},add:function(){var t=this;this.$post("/Subject",this.po.base).then(function(e){t.$alert("添加成功","提示","info")}).catch(function(e){e&&t.$alert(e.message,"错误","error")})},edit:function(){var t=this;this.$refs.baseForm.validate(function(e){e&&("add"==t.vo.mode?t.add():t.$put("/Subject/".concat(t.po.id),Object.assign({},t.po.base,{id:t.po.id})).then(function(e){t.$alert("修改成功","提示","info")}).catch(function(e){e&&t.$alert(e.message,"错误","error")}))})},getInfo:function(){var o=this;this.$get("/Subject/".concat(this.po.id)).then(function(t){Object.keys(o.po.base).forEach(function(e){(t[e]||0===t[e])&&(o.po.base[e]=t[e])})}).catch(function(e){e&&o.$alert(e.message,"错误","error")})},back:function(){this.$router.back()}},created:function(){this.$route.params.id&&(0<this.$route.path.indexOf("view")?this.vo.mode="view":this.vo.mode="edit",this.po.id=this.$route.params.id,this.getInfo()),this.getSchools()},components:{}},i=(o(539),o(23)),n=Object(i.a)(a,s,[],!1,null,"0f2246f4",null);n.options.__file="src/pages/Subject/edit/index.vue";t.default=n.exports}}]);