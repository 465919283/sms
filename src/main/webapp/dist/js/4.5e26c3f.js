(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{491:function(e,t,a){var o=a(522);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a(63).default)("7edd0556",o,!1,{})},521:function(e,t,a){"use strict";var o=a(491);a.n(o).a},522:function(e,t,a){},555:function(e,t,a){"use strict";a.r(t);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("h5",{staticClass:"box__title"},[t._m(0),t._v(" "),a("el-button-group",{staticClass:"box__buttons",attrs:{size:"small"}},["view"!=t.vo.mode?a("el-button",{attrs:{type:"info",icon:"el-icon-edit",size:"small"},on:{click:t.edit}},[t._v("保存")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"info",icon:"el-icon-d-arrow-left",size:"small"},on:{click:t.back}},[t._v("返回")])],1)],1),t._v(" "),a("el-tabs",{staticClass:"box__tabs",attrs:{value:"base",type:"card"}},[a("el-tab-pane",{staticClass:"box__tab",attrs:{label:"学生基本信息",name:"base"}},[a("el-form",{ref:"baseForm",staticClass:"box__form",attrs:{disabled:"view"==t.vo.mode,model:t.po.base,"label-width":"80px",rules:t.vo.baseRiles}},[a("el-form-item",{attrs:{label:"会员账号"}},[a("el-input",{model:{value:t.po.base.log_name,callback:function(e){t.$set(t.po.base,"log_name",e)},expression:"po.base.log_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"登录密码"}},[a("el-input",{attrs:{type:"password"},model:{value:t.po.base.log_password,callback:function(e){t.$set(t.po.base,"log_password",e)},expression:"po.base.log_password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{model:{value:t.po.base.telephone_number,callback:function(e){t.$set(t.po.base,"telephone_number",e)},expression:"po.base.telephone_number"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"会员名称",prop:"name"}},[a("el-input",{model:{value:t.po.base.name,callback:function(e){t.$set(t.po.base,"name",e)},expression:"po.base.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"昵称"}},[a("el-input",{model:{value:t.po.base.nick_name,callback:function(e){t.$set(t.po.base,"nick_name",e)},expression:"po.base.nick_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio-group",{model:{value:t.po.base.gender,callback:function(e){t.$set(t.po.base,"gender",e)},expression:"po.base.gender"}},[a("el-radio",{attrs:{label:1}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("女")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"生日",prop:"birthday"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.po.base.birthday,callback:function(e){t.$set(t.po.base,"birthday",e)},expression:"po.base.birthday"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"民族"}},[a("el-input",{model:{value:t.po.base.ethnicity,callback:function(e){t.$set(t.po.base,"ethnicity",e)},expression:"po.base.ethnicity"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"家庭地址"}},[a("el-input",{model:{value:t.po.base.home_address,callback:function(e){t.$set(t.po.base,"home_address",e)},expression:"po.base.home_address"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"爸爸姓名"}},[a("el-input",{model:{value:t.po.base.father_name,callback:function(e){t.$set(t.po.base,"father_name",e)},expression:"po.base.father_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"爸爸电话"}},[a("el-input",{model:{value:t.po.base.father_telephone_number,callback:function(e){t.$set(t.po.base,"father_telephone_number",e)},expression:"po.base.father_telephone_number"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"妈妈姓名"}},[a("el-input",{model:{value:t.po.base.mother_name,callback:function(e){t.$set(t.po.base,"mother_name",e)},expression:"po.base.mother_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"妈妈电话"}},[a("el-input",{model:{value:t.po.base.mother_telephone_number,callback:function(e){t.$set(t.po.base,"mother_telephone_number",e)},expression:"po.base.mother_telephone_number"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"头像"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:t.vo.uploadImgURL,accept:"image/*",multiple:!1,limit:1,"file-list":t.vo.fileList,limi:1,name:"fileUpload","on-success":t.fileUploadSuccess,"on-remove":t.fileRemove,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"学习报告",name:"study"}})],1)],1)};o._withStripped=!0;var s={data:function(){return{po:{id:"",base:{log_name:"",log_password:"",telephone_number:"",name:"",nick_name:"",gender:"",birthday:"",ethnicity:"",photo_url:"",home_address:"",father_name:"",father_telephone_number:"",mother_name:"",mother_telephone_number:"",group_id:"",management_status:1}},vo:{mode:"add",baseRiles:{name:[{required:!0,message:"请输入会员名称",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],birthday:[{required:!0,message:"请选择生日",trigger:"change"}]},fileList:[],uploadImgURL:"/File/1"}}},computed:{},methods:{getSchools:function(){var t=this;this.$get("/Schools").then(function(e){t.vo.schools=e}).catch(function(e){e&&t.$alert(e.message,"错误","error")})},add:function(){var t=this;this.$post("/Member",this.po.base).then(function(e){t.$alert("添加成功","提示","info")}).catch(function(e){e&&t.$alert(e.message,"错误","error")})},edit:function(){var t=this;this.$refs.baseForm.validate(function(e){e&&("add"==t.vo.mode?t.add():t.$put("/Member/".concat(t.po.id),t.po.base).then(function(e){t.$alert("修改成功","提示","info")}).catch(function(e){e&&t.$alert(e.message,"错误","error")}))})},getInfo:function(){var a=this;this.$get("/Member/".concat(this.po.id)).then(function(t){Object.keys(a.po.base).forEach(function(e){(t[e]||0===t[e])&&(a.po.base[e]=t[e])}),t.photo_url&&a.vo.fileList.push({name:t.photo_url.split("/").pop(),url:t.photo_url})}).catch(function(e){e&&a.$alert(e.message,"错误","error")})},fileUploadSuccess:function(e,t,a){0==e.code?this.po.base.photo_url="http://39.96.211.124/images/"+e.data.path:this.po.base.photo_url=""},fileRemove:function(){this.po.base.photo_url=""},back:function(){this.$router.back()}},created:function(){var e=this;this.$route.params.id?(0<this.$route.path.indexOf("view")?this.vo.mode="view":this.vo.mode="edit",this.po.id=this.$route.params.id,this.getInfo()):(this.po.base.group_id=this.$route.query.group,this.po.base.group_id||this.$alert("参数错误，无班级ID","错误","error").then(function(){e.back()}))}},l=(a(521),a(23)),i=Object(l.a)(s,o,[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("i",{staticClass:"el-icon-tickets"}),e._v("编辑页面")])}],!1,null,"d9ae4f64",null);i.options.__file="src/pages/member/edit/index.vue";t.default=i.exports}}]);